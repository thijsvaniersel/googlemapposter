{"version":3,"file":"index.js","sources":["src/component/icon-style/style.vue?rollup-plugin-vue=script.js","src/component/icon-style/style.vue","src/component/icon-style/index.js"],"sourcesContent":["\nimport Icon from 'ol/style/Icon'\nimport { imageStyle } from '../../mixin'\nimport { assert } from '../../util/assert'\nimport { arrayLengthValidator, isEmpty, isEqual } from '../../util/minilo'\nimport { makeWatchers } from '../../util/vue-helpers'\n\nexport default {\n  name: 'vl-style-icon',\n  mixins: [imageStyle],\n  props: {\n    src: String,\n    size: {\n      type: Array,\n      validator: arrayLengthValidator(2),\n    },\n    img: Image,\n    imgSize: {\n      type: Array,\n      validator: arrayLengthValidator(2),\n    },\n    anchor: {\n      type: Array,\n      default: () => [0.5, 0.5],\n      validator: arrayLengthValidator(2),\n    },\n    anchorOrigin: {\n      type: String,\n      default: 'top-left', // bottom-left, bottom-right, top-left or top-right\n    },\n    anchorXUnits: {\n      type: String,\n      default: 'fraction', // pixels, fraction\n    },\n    anchorYUnits: {\n      type: String,\n      default: 'fraction', // pixels, fraction\n    },\n    color: [Array, String],\n    crossOrigin: String,\n    offset: {\n      type: Array,\n      default: () => [0, 0],\n      validator: arrayLengthValidator(2),\n    },\n    offsetOrigin: {\n      type: String,\n      default: 'top-left', // bottom-left, bottom-right, top-left or top-right\n    },\n    opacity: {\n      type: Number,\n      default: 1,\n    },\n    scale: {\n      type: Number,\n      default: 1,\n    },\n    rotateWithView: {\n      type: Boolean,\n      default: false,\n    },\n    rotation: {\n      type: Number,\n      default: 0,\n    },\n  },\n  methods: {\n    /**\n     * @return {Icon}\n     * @protected\n     */\n    createStyle () {\n      assert((this.src && !this.img) || (!this.src && this.img), `vl-style-icon one of 'image' or 'src' prop must be provided.`)\n      assert(!this.img || (this.img && !isEmpty(this.imgSize)), `vl-style-icon 'imgSize' must be set when image is provided.`)\n\n      return new Icon({\n        anchor: this.anchor,\n        anchorOrigin: this.anchorOrigin,\n        anchorXUnits: this.anchorXUnits,\n        anchorYUnits: this.anchorYUnits,\n        color: this.color,\n        crossOrigin: this.crossOrigin,\n        offset: this.offset,\n        offsetOrigin: this.offsetOrigin,\n        opacity: this.opacity,\n        scale: this.scale,\n        rotateWithView: this.rotateWithView,\n        rotation: this.rotation,\n        size: this.size,\n        src: this.src,\n        img: this.img,\n        imgSize: this.imgSize,\n      })\n    },\n  },\n  watch: {\n    src (value) {\n      if (this.$style && !isEqual(value, this.$style.getSrc())) {\n        this.scheduleRefresh()\n      }\n    },\n    size (value) {\n      if (this.$style && !isEqual(value, this.$style.getSize())) {\n        this.scheduleRefresh()\n      }\n    },\n    anchor (value) {\n      if (this.$style && !isEqual(value, this.$style.getAnchor())) {\n        this.scheduleRefresh()\n      }\n    },\n    color (value) {\n      if (this.$style && !isEqual(value, this.$style.getColor())) {\n        this.scheduleRefresh()\n      }\n    },\n    opacity (value) {\n      if (this.$style && !isEqual(value, this.$style.getOpacity())) {\n        this.scheduleRefresh()\n      }\n    },\n    scale (value) {\n      if (this.$style && !isEqual(value, this.$style.getScale())) {\n        this.scheduleRefresh()\n      }\n    },\n    rotateWithView (value) {\n      if (this.$style && !isEqual(value, this.$style.getRotateWithView())) {\n        this.scheduleRefresh()\n      }\n    },\n    rotation (value) {\n      if (this.$style && !isEqual(value, this.$style.getRotation())) {\n        this.scheduleRefresh()\n      }\n    },\n    ...makeWatchers([\n      'anchorOrigin',\n      'anchorXUnits',\n      'anchorYUnits',\n      'crossOrigin',\n      'offset',\n      'offsetOrigin',\n      'img',\n      'imgSize',\n    ], () => function () {\n      this.scheduleRefresh()\n    }),\n  },\n}\n","<script>\n  import Icon from 'ol/style/Icon'\n  import { imageStyle } from '../../mixin'\n  import { assert } from '../../util/assert'\n  import { arrayLengthValidator, isEmpty, isEqual } from '../../util/minilo'\n  import { makeWatchers } from '../../util/vue-helpers'\n\n  export default {\n    name: 'vl-style-icon',\n    mixins: [imageStyle],\n    props: {\n      src: String,\n      size: {\n        type: Array,\n        validator: arrayLengthValidator(2),\n      },\n      img: Image,\n      imgSize: {\n        type: Array,\n        validator: arrayLengthValidator(2),\n      },\n      anchor: {\n        type: Array,\n        default: () => [0.5, 0.5],\n        validator: arrayLengthValidator(2),\n      },\n      anchorOrigin: {\n        type: String,\n        default: 'top-left', // bottom-left, bottom-right, top-left or top-right\n      },\n      anchorXUnits: {\n        type: String,\n        default: 'fraction', // pixels, fraction\n      },\n      anchorYUnits: {\n        type: String,\n        default: 'fraction', // pixels, fraction\n      },\n      color: [Array, String],\n      crossOrigin: String,\n      offset: {\n        type: Array,\n        default: () => [0, 0],\n        validator: arrayLengthValidator(2),\n      },\n      offsetOrigin: {\n        type: String,\n        default: 'top-left', // bottom-left, bottom-right, top-left or top-right\n      },\n      opacity: {\n        type: Number,\n        default: 1,\n      },\n      scale: {\n        type: Number,\n        default: 1,\n      },\n      rotateWithView: {\n        type: Boolean,\n        default: false,\n      },\n      rotation: {\n        type: Number,\n        default: 0,\n      },\n    },\n    methods: {\n      /**\n       * @return {Icon}\n       * @protected\n       */\n      createStyle () {\n        assert((this.src && !this.img) || (!this.src && this.img), `vl-style-icon one of 'image' or 'src' prop must be provided.`)\n        assert(!this.img || (this.img && !isEmpty(this.imgSize)), `vl-style-icon 'imgSize' must be set when image is provided.`)\n\n        return new Icon({\n          anchor: this.anchor,\n          anchorOrigin: this.anchorOrigin,\n          anchorXUnits: this.anchorXUnits,\n          anchorYUnits: this.anchorYUnits,\n          color: this.color,\n          crossOrigin: this.crossOrigin,\n          offset: this.offset,\n          offsetOrigin: this.offsetOrigin,\n          opacity: this.opacity,\n          scale: this.scale,\n          rotateWithView: this.rotateWithView,\n          rotation: this.rotation,\n          size: this.size,\n          src: this.src,\n          img: this.img,\n          imgSize: this.imgSize,\n        })\n      },\n    },\n    watch: {\n      src (value) {\n        if (this.$style && !isEqual(value, this.$style.getSrc())) {\n          this.scheduleRefresh()\n        }\n      },\n      size (value) {\n        if (this.$style && !isEqual(value, this.$style.getSize())) {\n          this.scheduleRefresh()\n        }\n      },\n      anchor (value) {\n        if (this.$style && !isEqual(value, this.$style.getAnchor())) {\n          this.scheduleRefresh()\n        }\n      },\n      color (value) {\n        if (this.$style && !isEqual(value, this.$style.getColor())) {\n          this.scheduleRefresh()\n        }\n      },\n      opacity (value) {\n        if (this.$style && !isEqual(value, this.$style.getOpacity())) {\n          this.scheduleRefresh()\n        }\n      },\n      scale (value) {\n        if (this.$style && !isEqual(value, this.$style.getScale())) {\n          this.scheduleRefresh()\n        }\n      },\n      rotateWithView (value) {\n        if (this.$style && !isEqual(value, this.$style.getRotateWithView())) {\n          this.scheduleRefresh()\n        }\n      },\n      rotation (value) {\n        if (this.$style && !isEqual(value, this.$style.getRotation())) {\n          this.scheduleRefresh()\n        }\n      },\n      ...makeWatchers([\n        'anchorOrigin',\n        'anchorXUnits',\n        'anchorYUnits',\n        'crossOrigin',\n        'offset',\n        'offsetOrigin',\n        'img',\n        'imgSize',\n      ], () => function () {\n        this.scheduleRefresh()\n      }),\n    },\n  }\n</script>\n","import { pick } from '../../util/minilo'\nimport Style from './style.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Style, options)\n\n  Vue.component(Style.name, Style)\n}\n\nexport default plugin\n\nexport {\n  Style,\n  plugin as install,\n}\n"],"names":["name","mixins","imageStyle","props","src","String","size","type","Array","validator","arrayLengthValidator","img","Image","imgSize","anchor","default","anchorOrigin","anchorXUnits","anchorYUnits","color","crossOrigin","offset","offsetOrigin","opacity","Number","scale","rotateWithView","Boolean","rotation","methods","createStyle","assert","isEmpty","Icon","watch","value","$style","isEqual","getSrc","scheduleRefresh","getSize","getAnchor","getColor","getOpacity","getScale","getRotateWithView","getRotation","makeWatchers","plugin","Vue","options","installed","pick","Style","component"],"mappings":"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"}