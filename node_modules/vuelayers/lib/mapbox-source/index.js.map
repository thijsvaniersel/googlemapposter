{"version":3,"file":"index.js","sources":["src/component/mapbox-source/source.vue?rollup-plugin-vue=script.js","src/component/mapbox-source/source.vue","src/component/mapbox-source/index.js"],"sourcesContent":["\nimport { xyzSource } from '../../mixin'\nimport { EPSG_3857, TILE_FORMAT } from '../../ol-ext'\nimport { coalesce } from '../../util/minilo'\n\nconst MAPBOX_URL_TEMPLATE = 'https://{a-c}.tiles.mapbox.com/v4/{mapId}/{z}/{x}/{y}{tileNameSuffix}.{tileFormat}?access_token={accessToken}'\nconst MAPBOX_ATTRIBUTIONS = '&copy; <a href=\"https://www.mapbox.com/\" target=\"_blank\">MapBox</a>, ' + (new Date().getFullYear())\n\nconst props = {\n  accessToken: {\n    type: String,\n    required: true,\n  },\n  attributions: {\n    type: [String, Array],\n    default: MAPBOX_ATTRIBUTIONS,\n  },\n  mapId: {\n    type: String,\n    required: true,\n  },\n  projection: {\n    type: String,\n    default: EPSG_3857,\n  },\n  tileFormat: {\n    type: String,\n    default: TILE_FORMAT,\n  },\n  url: {\n    type: String,\n    default: MAPBOX_URL_TEMPLATE,\n    required: false,\n  },\n}\n\nconst computed = {\n  /**\n   * @type {string}\n   */\n  tileNameSuffix () {\n    return tileNameSuffix(this.tilePixelRatio)\n  },\n  /**\n   * @type {string[]}\n   */\n  urlTokens () {\n    return ['mapId', 'accessToken', 'tileNameSuffix', 'tileFormat']\n  },\n}\n\nexport default {\n  name: 'vl-source-mapbox',\n  mixins: [xyzSource],\n  props,\n  computed,\n}\n\n/**\n * @param {number} [ratio]\n * @returns {number}\n * @private\n */\nfunction tileRatio (ratio) {\n  ratio = coalesce(ratio, 1)\n\n  return ratio > 1 ? 2 : 1\n}\n\n/**\n * @param {number} [ratio]\n * @returns {string}\n * @private\n */\nfunction tileNameSuffix (ratio) {\n  ratio = tileRatio(ratio)\n\n  return ratio > 1 ? ['@', ratio, 'x'].join('') : ''\n}\n","<script>\n  import { xyzSource } from '../../mixin'\n  import { EPSG_3857, TILE_FORMAT } from '../../ol-ext'\n  import { coalesce } from '../../util/minilo'\n\n  const MAPBOX_URL_TEMPLATE = 'https://{a-c}.tiles.mapbox.com/v4/{mapId}/{z}/{x}/{y}{tileNameSuffix}.{tileFormat}?access_token={accessToken}'\n  const MAPBOX_ATTRIBUTIONS = '&copy; <a href=\"https://www.mapbox.com/\" target=\"_blank\">MapBox</a>, ' + (new Date().getFullYear())\n\n  const props = {\n    accessToken: {\n      type: String,\n      required: true,\n    },\n    attributions: {\n      type: [String, Array],\n      default: MAPBOX_ATTRIBUTIONS,\n    },\n    mapId: {\n      type: String,\n      required: true,\n    },\n    projection: {\n      type: String,\n      default: EPSG_3857,\n    },\n    tileFormat: {\n      type: String,\n      default: TILE_FORMAT,\n    },\n    url: {\n      type: String,\n      default: MAPBOX_URL_TEMPLATE,\n      required: false,\n    },\n  }\n\n  const computed = {\n    /**\n     * @type {string}\n     */\n    tileNameSuffix () {\n      return tileNameSuffix(this.tilePixelRatio)\n    },\n    /**\n     * @type {string[]}\n     */\n    urlTokens () {\n      return ['mapId', 'accessToken', 'tileNameSuffix', 'tileFormat']\n    },\n  }\n\n  export default {\n    name: 'vl-source-mapbox',\n    mixins: [xyzSource],\n    props,\n    computed,\n  }\n\n  /**\n   * @param {number} [ratio]\n   * @returns {number}\n   * @private\n   */\n  function tileRatio (ratio) {\n    ratio = coalesce(ratio, 1)\n\n    return ratio > 1 ? 2 : 1\n  }\n\n  /**\n   * @param {number} [ratio]\n   * @returns {string}\n   * @private\n   */\n  function tileNameSuffix (ratio) {\n    ratio = tileRatio(ratio)\n\n    return ratio > 1 ? ['@', ratio, 'x'].join('') : ''\n  }\n</script>\n","import { pick } from '../../util/minilo'\nimport Source from './source.vue'\n\nfunction plugin (Vue, options = {}) {\n  if (plugin.installed) {\n    return\n  }\n  plugin.installed = true\n\n  options = pick(options, 'dataProjection')\n  Object.assign(Source, options)\n\n  Vue.component(Source.name, Source)\n}\n\nexport default plugin\n\nexport {\n  Source,\n  plugin as install,\n}\n"],"names":["MAPBOX_URL_TEMPLATE","MAPBOX_ATTRIBUTIONS","Date","getFullYear","props","accessToken","type","String","required","attributions","Array","default","mapId","projection","EPSG_3857","tileFormat","TILE_FORMAT","url","computed","tileNameSuffix","tilePixelRatio","urlTokens","name","mixins","xyzSource","tileRatio","ratio","coalesce","join","plugin","Vue","options","installed","pick","Source","component"],"mappings":";;;;;;;;;;;;;;;;AAKA,IAAMA,mBAAmB,GAAG,+GAA5B;AACA,IAAMC,mBAAmB,GAAG,0EAA2E,IAAIC,IAAJ,GAAWC,WAAX,EAAvG;AAEA,IAAMC,KAAK,GAAG;EACZC,WAAW,EAAE;IACXC,IAAI,EAAEC,MADK;IAEXC,QAAQ,EAAE;GAHA;EAKZC,YAAY,EAAE;IACZH,IAAI,EAAE,CAACC,MAAD,EAASG,KAAT,CADM;IAEZC,OAAO,EAAEV;GAPC;EASZW,KAAK,EAAE;IACLN,IAAI,EAAEC,MADD;IAELC,QAAQ,EAAE;GAXA;EAaZK,UAAU,EAAE;IACVP,IAAI,EAAEC,MADI;IAEVI,OAAO,EAAEG;GAfC;EAiBZC,UAAU,EAAE;IACVT,IAAI,EAAEC,MADI;IAEVI,OAAO,EAAEK;GAnBC;EAqBZC,GAAG,EAAE;IACHX,IAAI,EAAEC,MADH;IAEHI,OAAO,EAAEX,mBAFN;IAGHQ,QAAQ,EAAE;;CAxBd;AA4BA,IAAMU,QAAQ,GAAG;;;;EAIfC,cAJe,4BAIG;WACTA,eAAc,CAAC,KAAKC,cAAN,CAArB;GALa;;;;;EAUfC,SAVe,uBAUF;WACJ,CAAC,OAAD,EAAU,aAAV,EAAyB,gBAAzB,EAA2C,YAA3C,CAAP;;CAXJ;AAeA,aAAe;EACbC,IAAI,EAAE,kBADO;EAEbC,MAAM,EAAE,CAACC,SAAD,CAFK;EAGbpB,KAAK,EAALA,KAHa;EAIbc,QAAQ,EAARA;CAJF;;;;;;;AAYA,SAASO,SAAT,CAAoBC,KAApB,EAA2B;EACzBA,KAAK,GAAGC,QAAQ,CAACD,KAAD,EAAQ,CAAR,CAAhB;SAEOA,KAAK,GAAG,CAAR,GAAY,CAAZ,GAAgB,CAAvB;;;;;;;;;AAQF,SAASP,eAAT,CAAyBO,KAAzB,EAAgC;EAC9BA,KAAK,GAAGD,SAAS,CAACC,KAAD,CAAjB;SAEOA,KAAK,GAAG,CAAR,GAAY,CAAC,GAAD,EAAMA,KAAN,EAAa,GAAb,EAAkBE,IAAlB,CAAuB,EAAvB,CAAZ,GAAyC,EAAhD;;;AC1EU,2BAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAZ,SAASC,MAAT,CAAiBC,GAAjB,EAAoC;MAAdC,OAAc,uEAAJ,EAAI;;MAC9BF,MAAM,CAACG,SAAX,EAAsB;;;;EAGtBH,MAAM,CAACG,SAAP,GAAmB,IAAnB;EAEAD,OAAO,GAAGE,IAAI,CAACF,OAAD,EAAU,gBAAV,CAAd;;iBACcG,MAAd,EAAsBH,OAAtB;;EAEAD,GAAG,CAACK,SAAJ,CAAcD,MAAM,CAACZ,IAArB,EAA2BY,MAA3B;;;;;;"}