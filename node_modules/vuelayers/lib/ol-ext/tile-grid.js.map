{"version":3,"file":"tile-grid.js","sources":["src/ol-ext/tile-grid.js"],"sourcesContent":["import { toSize } from 'ol/size'\nimport { createXYZ as createXyzGrid } from 'ol/tilegrid'\nimport TileGrid from 'ol/tilegrid/TileGrid'\nimport { EXTENT_CORNER, MAX_ZOOM, TILE_SIZE } from './consts'\nimport { createExtentFromProjection, getExtentCorner, getExtentHeight, getExtentWidth } from './extent'\n\nexport {\n  createXyzGrid,\n}\n\n/**\n * Create a resolutions array from an extent.  A zoom factor of 2 is assumed.\n * @param {Extent} extent Extent.\n * @param {number=} maxZoom Maximum zoom level (default is\n *     ol.DEFAULT_MAX_ZOOM).\n * @param {number|Size=} tileSize Tile size (default uses\n *     ol.DEFAULT_TILE_SIZE).\n * @return {!Array.<number>} Resolutions array.\n * @see https://github.com/openlayers/openlayers/blob/master/src/ol/tilegrid.js#L104\n */\nexport function resolutionsFromExtent (extent, maxZoom = MAX_ZOOM, tileSize = TILE_SIZE) {\n  tileSize = toSize(tileSize)\n\n  const height = getExtentHeight(extent)\n  const width = getExtentWidth(extent)\n\n  const maxResolution = Math.max(\n    width / tileSize[0], height / tileSize[1])\n\n  const length = maxZoom + 1\n  const resolutions = new Array(length)\n\n  for (let z = 0; z < length; ++z) {\n    resolutions[z] = maxResolution / Math.pow(2, z)\n  }\n\n  return resolutions\n}\n\n/**\n * @param {Extent} extent Extent.\n * @param {number=} maxZoom Maximum zoom level (default is MAX_ZOOM).\n * @param {number|Size=} tileSize Tile size (default uses TILE_SIZE).\n * @param {string} [corner] Extent corner (default is EXTENT_CORNER.TOP_LEFT).\n * @return {TileGrid} TileGrid instance.\n * @see https://github.com/openlayers/openlayers/blob/master/src/ol/tilegrid.js#L58\n */\nexport function createGridForExtent (\n  extent,\n  maxZoom = MAX_ZOOM,\n  tileSize = TILE_SIZE,\n  corner = EXTENT_CORNER.TOP_LEFT,\n) {\n  const resolutions = resolutionsFromExtent(extent, maxZoom, tileSize)\n\n  return new TileGrid({\n    extent,\n    origin: getExtentCorner(extent, corner),\n    resolutions,\n    tileSize,\n  })\n}\n\n/**\n * @param {ProjectionLike} projection Projection.\n * @param {number=} maxZoom Maximum zoom level (default is\n *     ol.DEFAULT_MAX_ZOOM).\n * @param {number|Size=} tileSize Tile size (default uses ol.DEFAULT_TILE_SIZE).\n * @param {string} corner Extent corner (default is\n *     ol.extent.Corner.BOTTOM_LEFT).\n * @return {TileGrid} TileGrid instance.\n * @see https://github.com/openlayers/openlayers/blob/master/src/ol/tilegrid.js#L135\n */\nexport function createGridForProjection (\n  projection,\n  maxZoom = MAX_ZOOM,\n  tileSize = TILE_SIZE,\n  corner = EXTENT_CORNER.BOTTOM_LEFT,\n) {\n  return createGridForExtent(createExtentFromProjection(projection), maxZoom, tileSize, corner)\n}\n"],"names":["resolutionsFromExtent","extent","maxZoom","MAX_ZOOM","tileSize","TILE_SIZE","toSize","height","getExtentHeight","width","getExtentWidth","maxResolution","Math","max","length","resolutions","Array","z","pow","createGridForExtent","corner","EXTENT_CORNER","TOP_LEFT","TileGrid","origin","getExtentCorner","createGridForProjection","projection","BOTTOM_LEFT","createExtentFromProjection"],"mappings":";;;;;;;;;;;;;;;;;AAUA;;;;;;;;;;;AAUA,AAAO,SAASA,qBAAT,CAAgCC,MAAhC,EAAkF;MAA1CC,OAA0C,uEAAhCC,QAAgC;MAAtBC,QAAsB,uEAAXC,SAAW;EACvFD,QAAQ,GAAGE,MAAM,CAACF,QAAD,CAAjB;MAEMG,MAAM,GAAGC,eAAe,CAACP,MAAD,CAA9B;MACMQ,KAAK,GAAGC,cAAc,CAACT,MAAD,CAA5B;MAEMU,aAAa,GAAGC,IAAI,CAACC,GAAL,CACpBJ,KAAK,GAAGL,QAAQ,CAAC,CAAD,CADI,EACCG,MAAM,GAAGH,QAAQ,CAAC,CAAD,CADlB,CAAtB;MAGMU,MAAM,GAAGZ,OAAO,GAAG,CAAzB;MACMa,WAAW,GAAG,IAAIC,KAAJ,CAAUF,MAAV,CAApB;;OAEK,IAAIG,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,MAApB,EAA4B,EAAEG,CAA9B,EAAiC;IAC/BF,WAAW,CAACE,CAAD,CAAX,GAAiBN,aAAa,GAAGC,IAAI,CAACM,GAAL,CAAS,CAAT,EAAYD,CAAZ,CAAjC;;;SAGKF,WAAP;;;;;;;;;;;AAWF,AAAO,SAASI,mBAAT,CACLlB,MADK,EAKL;MAHAC,OAGA,uEAHUC,QAGV;MAFAC,QAEA,uEAFWC,SAEX;MADAe,MACA,uEADSC,aAAa,CAACC,QACvB;MACMP,WAAW,GAAGf,qBAAqB,CAACC,MAAD,EAASC,OAAT,EAAkBE,QAAlB,CAAzC;SAEO,IAAImB,QAAJ,CAAa;IAClBtB,MAAM,EAANA,MADkB;IAElBuB,MAAM,EAAEC,eAAe,CAACxB,MAAD,EAASmB,MAAT,CAFL;IAGlBL,WAAW,EAAXA,WAHkB;IAIlBX,QAAQ,EAARA;GAJK,CAAP;;;;;;;;;;;;;AAkBF,AAAO,SAASsB,uBAAT,CACLC,UADK,EAKL;MAHAzB,OAGA,uEAHUC,QAGV;MAFAC,QAEA,uEAFWC,SAEX;MADAe,MACA,uEADSC,aAAa,CAACO,WACvB;SACOT,mBAAmB,CAACU,0BAA0B,CAACF,UAAD,CAA3B,EAAyCzB,OAAzC,EAAkDE,QAAlD,EAA4DgB,MAA5D,CAA1B;;;;;"}