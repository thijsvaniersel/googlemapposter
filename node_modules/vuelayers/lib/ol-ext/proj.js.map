{"version":3,"file":"proj.js","sources":["src/ol-ext/proj.js"],"sourcesContent":["/**\n * Projection transform helpers\n */\nimport { addProjection as addProj, fromLonLat, get as getProj, toLonLat, transform, transformExtent } from 'ol/proj'\nimport Projection from 'ol/proj/Projection'\nimport { EPSG_3857, EPSG_4326, GEOMETRY_TYPE } from './consts'\n\nexport {\n  transform,\n  transformExtent,\n  getProj,\n  addProj,\n}\n\n/**\n * @param {Object} options\n * @return {Projection}\n */\nexport function createProj (options) {\n  return new Projection(options)\n}\n\n/**\n * @param {number[]} coordinate\n * @param {ProjectionLike} [projection]\n * @return {Coordinate|number[]}\n */\nexport function pointToLonLat (coordinate, projection = EPSG_3857) {\n  return toLonLat(coordinate, projection)\n}\n\n/**\n * @param {number[]} coordinate\n * @param {ProjectionLike} [projection]\n * @return {number[]}\n */\nexport function pointFromLonLat (coordinate, projection = EPSG_3857) {\n  return fromLonLat(coordinate, projection)\n}\n\nexport function transformPoint (coordinate, sourceProjection, destProjection) {\n  return transform(coordinate, sourceProjection, destProjection)\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {ProjectionLike} [projection]\n * @return {Array<number[]>}\n */\nexport function lineToLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(point => pointToLonLat(point, projection))\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {ProjectionLike} [projection]\n * @return {Array<number[]>}\n */\nexport function lineFromLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(point => pointFromLonLat(point, projection))\n}\n\nexport function transformLine (coordinates, sourceProjection, destProjection) {\n  return coordinates.map(point => transform(point, sourceProjection, destProjection))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {ProjectionLike} [projection]\n * @return {Array<Array<number[]>>}\n */\nexport function polygonToLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(line => lineToLonLat(line, projection))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {ProjectionLike} [projection]\n * @return {Array<Array<number[]>>}\n */\nexport function polygonFromLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(line => lineFromLonLat(line, projection))\n}\n\nexport function transformPolygon (coordinates, sourceProjection, destProjection) {\n  return coordinates.map(line => transformLine(line, sourceProjection, destProjection))\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {ProjectionLike} [projection]\n * @return {Array<number[]>}\n */\nexport function multiPointToLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(point => pointToLonLat(point, projection))\n}\n\n/**\n * @param {Array<number[]>} coordinates\n * @param {ProjectionLike} [projection]\n * @return {Array<number[]>}\n */\nexport function multiPointFromLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(point => pointFromLonLat(point, projection))\n}\n\nexport function transformMultiPoint (coordinates, sourceProjection, destProjection) {\n  return coordinates.map(point => transformPoint(point, sourceProjection, destProjection))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {ProjectionLike} [projection]\n * @return {Array<Array<number[]>>}\n */\nexport function multiLineToLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(line => lineToLonLat(line, projection))\n}\n\n/**\n * @param {Array<Array<number[]>>} coordinates\n * @param {ProjectionLike} [projection]\n * @return {Array<Array<number[]>>}\n */\nexport function multiLineFromLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(line => lineFromLonLat(line, projection))\n}\n\nexport function transformMultiLine (coordinates, sourceProjection, destProjection) {\n  return coordinates.map(line => transformLine(line, sourceProjection, destProjection))\n}\n\n/**\n * @param {Array<Array<Array<number[]>>>} coordinates\n * @param {ProjectionLike} projection\n * @return {Array<Array<Array<number[]>>>}\n */\nexport function multiPolygonToLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(polygon => polygonToLonLat(polygon, projection))\n}\n\n/**\n * @param {Array<Array<Array<number[]>>>} coordinates\n * @param {ProjectionLike} projection\n * @return {Array<Array<Array<number[]>>>}\n */\nexport function multiPolygonFromLonLat (coordinates, projection = EPSG_3857) {\n  return coordinates.map(polygon => polygonFromLonLat(polygon, projection))\n}\n\nexport function transformMultiPolygon (coordinates, sourceProjection, destProjection) {\n  return coordinates.map(polygon => transformPolygon(polygon, sourceProjection, destProjection))\n}\n\n/**\n * Transforms by geom type\n * @type {Object<string, function>}\n */\nexport const transforms = {\n  [GEOMETRY_TYPE.POINT]: {\n    toLonLat: pointToLonLat,\n    fromLonLat: pointFromLonLat,\n    transform: transformPoint,\n  },\n  [GEOMETRY_TYPE.LINE_STRING]: {\n    toLonLat: lineToLonLat,\n    fromLonLat: lineFromLonLat,\n    transform: transformLine,\n  },\n  [GEOMETRY_TYPE.POLYGON]: {\n    toLonLat: polygonToLonLat,\n    fromLonLat: polygonFromLonLat,\n    transform: transformPolygon,\n  },\n  [GEOMETRY_TYPE.MULTI_POINT]: {\n    toLonLat: multiPointToLonLat,\n    fromLonLat: multiPointFromLonLat,\n    transform: transformMultiPoint,\n  },\n  [GEOMETRY_TYPE.MULTI_LINE_STRING]: {\n    toLonLat: multiLineToLonLat,\n    fromLonLat: multiLineFromLonLat,\n    transform: transformMultiLine,\n  },\n  [GEOMETRY_TYPE.MULTI_POLYGON]: {\n    toLonLat: multiPolygonToLonLat,\n    fromLonLat: multiPolygonFromLonLat,\n    transform: transformMultiPolygon,\n  },\n}\n\n/**\n * @param {Extent} extent\n * @param {ProjectionLike} [projection=EPSG:3857]\n * @return {Extent}\n */\nexport function extentFromLonLat (extent, projection = EPSG_3857) {\n  return transformExtent(extent, EPSG_4326, projection)\n}\n\n/**\n * @param {Extent} extent\n * @param {ProjectionLike} [projection=EPSG:3857]\n * @return {Extent}\n */\nexport function extentToLonLat (extent, projection = EPSG_3857) {\n  return transformExtent(extent, projection, EPSG_4326)\n}\n"],"names":["createProj","options","Projection","pointToLonLat","coordinate","projection","EPSG_3857","toLonLat","pointFromLonLat","fromLonLat","transformPoint","sourceProjection","destProjection","transform","lineToLonLat","coordinates","point","lineFromLonLat","transformLine","polygonToLonLat","line","polygonFromLonLat","transformPolygon","multiPointToLonLat","multiPointFromLonLat","transformMultiPoint","multiLineToLonLat","multiLineFromLonLat","transformMultiLine","multiPolygonToLonLat","polygon","multiPolygonFromLonLat","transformMultiPolygon","transforms","GEOMETRY_TYPE","POINT","LINE_STRING","POLYGON","MULTI_POINT","MULTI_LINE_STRING","MULTI_POLYGON","extentFromLonLat","extent","transformExtent","EPSG_4326","extentToLonLat"],"mappings":";;;;;;;;;;;;;;;;;;AAcA;;;;;AAIA,AAAO,SAASA,UAAT,CAAqBC,OAArB,EAA8B;SAC5B,IAAIC,UAAJ,CAAeD,OAAf,CAAP;;;;;;;;AAQF,AAAO,SAASE,aAAT,CAAwBC,UAAxB,EAA4D;MAAxBC,UAAwB,uEAAXC,SAAW;SAC1DC,QAAQ,CAACH,UAAD,EAAaC,UAAb,CAAf;;;;;;;;AAQF,AAAO,SAASG,eAAT,CAA0BJ,UAA1B,EAA8D;MAAxBC,UAAwB,uEAAXC,SAAW;SAC5DG,UAAU,CAACL,UAAD,EAAaC,UAAb,CAAjB;;AAGF,AAAO,SAASK,cAAT,CAAyBN,UAAzB,EAAqCO,gBAArC,EAAuDC,cAAvD,EAAuE;SACrEC,SAAS,CAACT,UAAD,EAAaO,gBAAb,EAA+BC,cAA/B,CAAhB;;;;;;;;AAQF,AAAO,SAASE,YAAT,CAAuBC,WAAvB,EAA4D;MAAxBV,UAAwB,uEAAXC,SAAW;SAC1D,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAC,KAAK;WAAIb,aAAa,CAACa,KAAD,EAAQX,UAAR,CAAjB;GAAV,CAAlB;;;;;;;;AAQF,AAAO,SAASY,cAAT,CAAyBF,WAAzB,EAA8D;MAAxBV,UAAwB,uEAAXC,SAAW;SAC5D,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAC,KAAK;WAAIR,eAAe,CAACQ,KAAD,EAAQX,UAAR,CAAnB;GAAV,CAAlB;;AAGF,AAAO,SAASa,aAAT,CAAwBH,WAAxB,EAAqCJ,gBAArC,EAAuDC,cAAvD,EAAuE;SACrE,qBAAAG,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAC,KAAK;WAAIH,SAAS,CAACG,KAAD,EAAQL,gBAAR,EAA0BC,cAA1B,CAAb;GAAV,CAAlB;;;;;;;;AAQF,AAAO,SAASO,eAAT,CAA0BJ,WAA1B,EAA+D;MAAxBV,UAAwB,uEAAXC,SAAW;SAC7D,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAK,IAAI;WAAIN,YAAY,CAACM,IAAD,EAAOf,UAAP,CAAhB;GAAT,CAAlB;;;;;;;;AAQF,AAAO,SAASgB,iBAAT,CAA4BN,WAA5B,EAAiE;MAAxBV,UAAwB,uEAAXC,SAAW;SAC/D,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAK,IAAI;WAAIH,cAAc,CAACG,IAAD,EAAOf,UAAP,CAAlB;GAAT,CAAlB;;AAGF,AAAO,SAASiB,gBAAT,CAA2BP,WAA3B,EAAwCJ,gBAAxC,EAA0DC,cAA1D,EAA0E;SACxE,qBAAAG,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAK,IAAI;WAAIF,aAAa,CAACE,IAAD,EAAOT,gBAAP,EAAyBC,cAAzB,CAAjB;GAAT,CAAlB;;;;;;;;AAQF,AAAO,SAASW,kBAAT,CAA6BR,WAA7B,EAAkE;MAAxBV,UAAwB,uEAAXC,SAAW;SAChE,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAC,KAAK;WAAIb,aAAa,CAACa,KAAD,EAAQX,UAAR,CAAjB;GAAV,CAAlB;;;;;;;;AAQF,AAAO,SAASmB,oBAAT,CAA+BT,WAA/B,EAAoE;MAAxBV,UAAwB,uEAAXC,SAAW;SAClE,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAC,KAAK;WAAIR,eAAe,CAACQ,KAAD,EAAQX,UAAR,CAAnB;GAAV,CAAlB;;AAGF,AAAO,SAASoB,mBAAT,CAA8BV,WAA9B,EAA2CJ,gBAA3C,EAA6DC,cAA7D,EAA6E;SAC3E,qBAAAG,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAC,KAAK;WAAIN,cAAc,CAACM,KAAD,EAAQL,gBAAR,EAA0BC,cAA1B,CAAlB;GAAV,CAAlB;;;;;;;;AAQF,AAAO,SAASc,iBAAT,CAA4BX,WAA5B,EAAiE;MAAxBV,UAAwB,uEAAXC,SAAW;SAC/D,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAK,IAAI;WAAIN,YAAY,CAACM,IAAD,EAAOf,UAAP,CAAhB;GAAT,CAAlB;;;;;;;;AAQF,AAAO,SAASsB,mBAAT,CAA8BZ,WAA9B,EAAmE;MAAxBV,UAAwB,uEAAXC,SAAW;SACjE,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAK,IAAI;WAAIH,cAAc,CAACG,IAAD,EAAOf,UAAP,CAAlB;GAAT,CAAlB;;AAGF,AAAO,SAASuB,kBAAT,CAA6Bb,WAA7B,EAA0CJ,gBAA1C,EAA4DC,cAA5D,EAA4E;SAC1E,qBAAAG,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAK,IAAI;WAAIF,aAAa,CAACE,IAAD,EAAOT,gBAAP,EAAyBC,cAAzB,CAAjB;GAAT,CAAlB;;;;;;;;AAQF,AAAO,SAASiB,oBAAT,CAA+Bd,WAA/B,EAAoE;MAAxBV,UAAwB,uEAAXC,SAAW;SAClE,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAe,OAAO;WAAIX,eAAe,CAACW,OAAD,EAAUzB,UAAV,CAAnB;GAAZ,CAAlB;;;;;;;;AAQF,AAAO,SAAS0B,sBAAT,CAAiChB,WAAjC,EAAsE;MAAxBV,UAAwB,uEAAXC,SAAW;SACpE,qBAAAS,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAe,OAAO;WAAIT,iBAAiB,CAACS,OAAD,EAAUzB,UAAV,CAArB;GAAZ,CAAlB;;AAGF,AAAO,SAAS2B,qBAAT,CAAgCjB,WAAhC,EAA6CJ,gBAA7C,EAA+DC,cAA/D,EAA+E;SAC7E,qBAAAG,WAAW,MAAX,CAAAA,WAAW,EAAK,UAAAe,OAAO;WAAIR,gBAAgB,CAACQ,OAAD,EAAUnB,gBAAV,EAA4BC,cAA5B,CAApB;GAAZ,CAAlB;;;;;;;AAOF,IAAaqB,UAAU,mDACpBC,aAAa,CAACC,KADM,EACE;EACrB5B,QAAQ,EAAEJ,aADW;EAErBM,UAAU,EAAED,eAFS;EAGrBK,SAAS,EAAEH;CAJQ,gCAMpBwB,aAAa,CAACE,WANM,EAMQ;EAC3B7B,QAAQ,EAAEO,YADiB;EAE3BL,UAAU,EAAEQ,cAFe;EAG3BJ,SAAS,EAAEK;CATQ,gCAWpBgB,aAAa,CAACG,OAXM,EAWI;EACvB9B,QAAQ,EAAEY,eADa;EAEvBV,UAAU,EAAEY,iBAFW;EAGvBR,SAAS,EAAES;CAdQ,gCAgBpBY,aAAa,CAACI,WAhBM,EAgBQ;EAC3B/B,QAAQ,EAAEgB,kBADiB;EAE3Bd,UAAU,EAAEe,oBAFe;EAG3BX,SAAS,EAAEY;CAnBQ,gCAqBpBS,aAAa,CAACK,iBArBM,EAqBc;EACjChC,QAAQ,EAAEmB,iBADuB;EAEjCjB,UAAU,EAAEkB,mBAFqB;EAGjCd,SAAS,EAAEe;CAxBQ,gCA0BpBM,aAAa,CAACM,aA1BM,EA0BU;EAC7BjC,QAAQ,EAAEsB,oBADmB;EAE7BpB,UAAU,EAAEsB,sBAFiB;EAG7BlB,SAAS,EAAEmB;CA7BQ,eAAhB;;;;;;;AAsCP,AAAO,SAASS,gBAAT,CAA2BC,MAA3B,EAA2D;MAAxBrC,UAAwB,uEAAXC,SAAW;SACzDqC,eAAe,CAACD,MAAD,EAASE,SAAT,EAAoBvC,UAApB,CAAtB;;;;;;;;AAQF,AAAO,SAASwC,cAAT,CAAyBH,MAAzB,EAAyD;MAAxBrC,UAAwB,uEAAXC,SAAW;SACvDqC,eAAe,CAACD,MAAD,EAASrC,UAAT,EAAqBuC,SAArB,CAAtB;;;;;"}