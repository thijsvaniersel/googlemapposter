{"version":3,"file":"feature.js","sources":["src/ol-ext/feature.js"],"sourcesContent":["import Feature from 'ol/Feature'\nimport uuid from 'uuid/v4'\nimport Vue from 'vue'\nimport { isNumber, isPlainObject, isString } from '../util/minilo'\n\n/**\n * @param {Object|Vue|Feature|string|number} feature\n * @return {string|number}\n * @throws {Error}\n */\nexport function getFeatureId (feature) {\n  if (isPlainObject(feature) || feature instanceof Vue) {\n    return feature.id\n  } else if (feature instanceof Feature) {\n    return feature.getId()\n  } else if (isString(feature) || isNumber(feature)) {\n    return feature\n  }\n\n  throw new Error('Illegal feature format')\n}\n\n/**\n * @param {Feature|Vue|Object} feature\n * @param {string} featureId\n * @returns {Feature|Vue|Object}\n */\nexport function setFeatureId (feature, featureId) {\n  if (isPlainObject(feature) || feature instanceof Vue) {\n    feature.id = featureId\n\n    return feature\n  } else if (feature instanceof Feature) {\n    feature.setId(featureId)\n\n    return feature\n  }\n\n  throw new Error('Illegal feature format')\n}\n\n/**\n * @param {Feature} feature\n * @param {string|undefined} defaultFeatureId\n * @returns {Feature}\n */\nexport function initializeFeature (feature, defaultFeatureId) {\n  if (getFeatureId(feature) == null) {\n    setFeatureId(feature, defaultFeatureId || uuid())\n  }\n\n  return feature\n}\n\n/**\n * @param {Feature} destFeature\n * @param {Feature} srcFeature\n * @returns {Feature}\n */\nexport function mergeFeatures (destFeature, srcFeature) {\n  destFeature.setProperties({ ...srcFeature.getProperties() })\n  destFeature.setGeometry(srcFeature.getGeometry().clone())\n  destFeature.setStyle(srcFeature.getStyle() != null ? srcFeature.getStyle().clone() : undefined)\n\n  return destFeature\n}\n"],"names":["getFeatureId","feature","isPlainObject","Vue","id","Feature","getId","isString","isNumber","Error","setFeatureId","featureId","setId","initializeFeature","defaultFeatureId","uuid","mergeFeatures","destFeature","srcFeature","setProperties","getProperties","setGeometry","getGeometry","clone","setStyle","getStyle","undefined"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA;;;;;;AAKA,AAAO,SAASA,YAAT,CAAuBC,OAAvB,EAAgC;MACjCC,aAAa,CAACD,OAAD,CAAb,IAA0BA,OAAO,YAAYE,GAAjD,EAAsD;WAC7CF,OAAO,CAACG,EAAf;GADF,MAEO,IAAIH,OAAO,YAAYI,OAAvB,EAAgC;WAC9BJ,OAAO,CAACK,KAAR,EAAP;GADK,MAEA,IAAIC,QAAQ,CAACN,OAAD,CAAR,IAAqBO,QAAQ,CAACP,OAAD,CAAjC,EAA4C;WAC1CA,OAAP;;;QAGI,IAAIQ,KAAJ,CAAU,wBAAV,CAAN;;;;;;;;AAQF,AAAO,SAASC,YAAT,CAAuBT,OAAvB,EAAgCU,SAAhC,EAA2C;MAC5CT,aAAa,CAACD,OAAD,CAAb,IAA0BA,OAAO,YAAYE,GAAjD,EAAsD;IACpDF,OAAO,CAACG,EAAR,GAAaO,SAAb;WAEOV,OAAP;GAHF,MAIO,IAAIA,OAAO,YAAYI,OAAvB,EAAgC;IACrCJ,OAAO,CAACW,KAAR,CAAcD,SAAd;WAEOV,OAAP;;;QAGI,IAAIQ,KAAJ,CAAU,wBAAV,CAAN;;;;;;;;AAQF,AAAO,SAASI,iBAAT,CAA4BZ,OAA5B,EAAqCa,gBAArC,EAAuD;MACxDd,YAAY,CAACC,OAAD,CAAZ,IAAyB,IAA7B,EAAmC;IACjCS,YAAY,CAACT,OAAD,EAAUa,gBAAgB,IAAIC,IAAI,EAAlC,CAAZ;;;SAGKd,OAAP;;;;;;;;AAQF,AAAO,SAASe,aAAT,CAAwBC,WAAxB,EAAqCC,UAArC,EAAiD;EACtDD,WAAW,CAACE,aAAZ,mBAA+BD,UAAU,CAACE,aAAX,EAA/B;EACAH,WAAW,CAACI,WAAZ,CAAwBH,UAAU,CAACI,WAAX,GAAyBC,KAAzB,EAAxB;EACAN,WAAW,CAACO,QAAZ,CAAqBN,UAAU,CAACO,QAAX,MAAyB,IAAzB,GAAgCP,UAAU,CAACO,QAAX,GAAsBF,KAAtB,EAAhC,GAAgEG,SAArF;SAEOT,WAAP;;;;;"}