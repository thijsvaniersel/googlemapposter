{"version":3,"file":"rx-subs.js","sources":["src/mixin/rx-subs.js"],"sourcesContent":["import { error as logError } from '../util/log'\nimport { noop } from '../util/minilo'\n\n/**\n * RxJS subscriptions manager.\n */\nexport default {\n  methods: {\n    /**\n     * @return {void}\n     * @protected\n     */\n    subscribeAll () { },\n    /**\n     * @return {void}\n     * @protected\n     */\n    unsubscribeAll () {\n      this._rxSubs.forEach(x => x.unsubscribe())\n      this._rxSubs = []\n    },\n    /**\n     * @param {Observable<T>} observable\n     * @param {function} [next] Next handler or Observer object.\n     * @param {function} [error] Error handler.\n     * @param {function} [complete] Complete handler.\n     * @return {Subscription}\n     * @protected\n     */\n    subscribeTo (observable, next = noop, error = noop, complete = noop) {\n      error = err => {\n        if (process.env.NODE_ENV !== 'production') {\n          logError(err.stack)\n        }\n        error(err)\n      }\n\n      const subs = observable.subscribe(next, error, complete)\n      this._rxSubs.push(subs)\n\n      return subs\n    },\n    unsubscribe (subs) {\n      const idx = this._rxSubs.indexOf(subs)\n      if (idx === -1) return\n\n      subs.unsubscribe()\n      this._rxSubs.splice(idx, 1)\n    },\n  },\n  beforeCreate () {\n    /**\n     * @type {Subscription[]}\n     * @private\n     */\n    this._rxSubs = []\n  },\n  destroyed () {\n    this.unsubscribeAll()\n  },\n}\n"],"names":["methods","subscribeAll","unsubscribeAll","_rxSubs","x","unsubscribe","subscribeTo","observable","next","noop","error","complete","err","process","env","NODE_ENV","logError","stack","subs","subscribe","push","idx","beforeCreate","destroyed"],"mappings":";;;;;;;;;;;;;;;;AAGA;;;;AAGA,aAAe;EACbA,OAAO,EAAE;;;;;IAKPC,YALO,0BAKS,EALT;;;;;;IAUPC,cAVO,4BAUW;;;+CACXC,OAAL,iBAAqB,UAAAC,CAAC;eAAIA,CAAC,CAACC,WAAF,EAAJ;OAAtB;;WACKF,OAAL,GAAe,EAAf;KAZK;;;;;;;;;;IAsBPG,WAtBO,uBAsBMC,UAtBN,EAsB8D;UAA5CC,IAA4C,uEAArCC,IAAqC;;UAA/BC,MAA+B,uEAAvBD,IAAuB;;UAAjBE,QAAiB,uEAANF,IAAM;;MACnEC,MAAK,GAAG,kBAAAE,GAAG,EAAI;YACTC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAA7B,EAA2C;UACzCC,KAAQ,CAACJ,GAAG,CAACK,KAAL,CAAR;;;QAEFP,MAAK,CAACE,GAAD,CAAL;OAJF;;UAOMM,IAAI,GAAGX,UAAU,CAACY,SAAX,CAAqBX,IAArB,EAA2BE,MAA3B,EAAkCC,QAAlC,CAAb;;WACKR,OAAL,CAAaiB,IAAb,CAAkBF,IAAlB;;aAEOA,IAAP;KAjCK;IAmCPb,WAnCO,uBAmCMa,IAnCN,EAmCY;;;UACXG,GAAG,GAAG,0CAAKlB,OAAL,kBAAqBe,IAArB,CAAZ;;UACIG,GAAG,KAAK,CAAC,CAAb,EAAgB;MAEhBH,IAAI,CAACb,WAAL;;+CACKF,OAAL,kBAAoBkB,GAApB,EAAyB,CAAzB;;GAzCS;EA4CbC,YA5Ca,0BA4CG;;;;;SAKTnB,OAAL,GAAe,EAAf;GAjDW;EAmDboB,SAnDa,uBAmDA;SACNrB,cAAL;;CApDJ;;;;"}