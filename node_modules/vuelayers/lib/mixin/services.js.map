{"version":3,"file":"services.js","sources":["src/mixin/services.js"],"sourcesContent":["import mergeDescriptors from '../util/multi-merge-descriptors'\n\n// todo uncomment when IE 11 will die\n// const SERVICES_PROP = Symbol('services')\nconst SERVICES_PROP = 'services'\n\n/**\n * Service container mixin\n */\nexport default {\n  inject: {\n    $services: SERVICES_PROP,\n    // todo works only in Vue 2.5.x\n    // $services: {from: SERVICES_PROP, default: Object.create(null)},\n  },\n  provide () {\n    return {\n      [SERVICES_PROP]: this.getServices(),\n    }\n  },\n  methods: {\n    /**\n     * @returns {Object}\n     * @protected\n     */\n    getServices () {\n      return mergeDescriptors({}, this.$services || {})\n    },\n  },\n  beforeCreate () {\n    let source = this.$parent\n    while (source) {\n      if (source._provided != null && source._provided[SERVICES_PROP] != null) {\n        break\n      }\n      source = source.$parent\n    }\n    if (source == null || source._provided[SERVICES_PROP] == null) {\n      delete this.$options.inject.$services\n    }\n  },\n}\n"],"names":["SERVICES_PROP","inject","$services","provide","getServices","methods","mergeDescriptors","beforeCreate","source","$parent","_provided","$options"],"mappings":";;;;;;;;;;;;;AAGA;;AACA,IAAMA,aAAa,GAAG,UAAtB;;;;;AAKA,eAAe;EACbC,MAAM,EAAE;IACNC,SAAS,EAAEF,aADL;;;GADK;EAMbG,OANa,qBAMF;+BAENH,aADH,EACmB,KAAKI,WAAL,EADnB;GAPW;EAWbC,OAAO,EAAE;;;;;IAKPD,WALO,yBAKQ;aACNE,gBAAgB,CAAC,EAAD,EAAK,KAAKJ,SAAL,IAAkB,EAAvB,CAAvB;;GAjBS;EAoBbK,YApBa,0BAoBG;QACVC,MAAM,GAAG,KAAKC,OAAlB;;WACOD,MAAP,EAAe;UACTA,MAAM,CAACE,SAAP,IAAoB,IAApB,IAA4BF,MAAM,CAACE,SAAP,CAAiBV,aAAjB,KAAmC,IAAnE,EAAyE;;;;MAGzEQ,MAAM,GAAGA,MAAM,CAACC,OAAhB;;;QAEED,MAAM,IAAI,IAAV,IAAkBA,MAAM,CAACE,SAAP,CAAiBV,aAAjB,KAAmC,IAAzD,EAA+D;aACtD,KAAKW,QAAL,CAAcV,MAAd,CAAqBC,SAA5B;;;CA7BN;;;;"}